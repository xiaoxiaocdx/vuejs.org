

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Creating Custom Scroll Directives - Vue 中文文档(@印记中文) https://docschina.org/</title>
    <meta charset="utf-8">
    <meta name="description" content="Vue.js - JavaScript 渐进式框架">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="alternate" hreflang="x-default" href="https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">
    <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Creating Custom Scroll Directives — Vue.js">
    <meta property="og:description" content="Vue.js - JavaScript 渐进式框架">
    <meta property="og:image" content="https://vue.docschina.org//images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Creating Custom Scroll Directives — Vue.js">
    <meta name="twitter:description" content="Vue.js - JavaScript 渐进式框架">
    <meta name="twitter:image" content="https://vue.docschina.org/images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script src="/js/vue.js"></script>
    <script>window.PAGE_TYPE = "cookbook"</script>

    <!-- baidu -->
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ebacf70d9d85cfb235c83d600113ee3e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>

  </head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Vue.js</span>
  </a>
  <span style="overflow: hidden; display: inline-block; position: relative; top: 10px; left: 6px; font-size: 12px;">
    2018.04.01 与 vuejs.org  同步<br>相关说明请点击<a target="_blank" href="https://github.com/docschina/vuejs.org/blob/cn/UPDATE.md" style="color: dodgerblue">这里</a>
  </span>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">学习</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">指南</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">风格指南</a></li>
      <li><a href="/v2/examples/" class="nav-link">示例</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">生态系统</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>帮助</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">论坛</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">聊天室</a></li>
    </ul></li>
    <li><h4>工具</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Devtools</a></li>
        <li><a href="https://vuejs-templates.github.io/webpack" class="nav-link" target="_blank">webpack 模板</a></li>
        <li><a href="https://vue-loader.vuejs.org" class="nav-link" target="_blank">Vue loader</a></li>
      </ul>
    </li>
    <li><h4>核心库</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/" class="nav-link" target="_blank">Vue 服务器端渲染</a></li>
    </ul></li>
    <li><h4>信息</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">周刊</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">升级路线</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">推特</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">博客</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">工作</a></li>
    </ul></li>
    <li><h4>资源列表</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">官方仓库</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue 优选</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Vue 资源</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">团队</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">支持 Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">单次捐助</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">循环捐助</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">T恤商店</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">多语言</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>

<li class="nav-dropdown-container contribute">
  <a class="nav-link">参与贡献</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
        <li><a href="/about/index.html" class="nav-link">公告说明</a></li>
        <li><a href="https://github.com/docschina/vuejs.org/blob/cn/UPDATE.md" class="nav-link">更新记录</a></li>
      </ul></li>
  </ul>
</li>
<li class="nav-dropdown-container docschina">
  <a class="nav-link" style="color: #e96901">印记中文</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
        <li><a href="https://docschina.org/" target="_blank">印记中文首页</a></li>
        <li><a href="https://docschina.org/team" target="_blank">加入我们翻译文档</a></li>
        <li><a href="https://webpack.docschina.org/" target="_blank">webpack 中文文档</a></li>
        <li><a href="https://parceljs.docschina.org/" target="_blank">Parcel.js 中文文档</a></li>
        <li><a href="https://doc.react-china.org/" target="_blank">React.js 中文文档</a></li>
        <li><a href="http://nodejs.cn/" target="_blank">Node.js 中文文档</a></li>
      </ul></li>
    <li>
  </ul>
</li>

<li>

  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">学习</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">指南</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">风格指南</a></li>
      <li><a href="/v2/examples/" class="nav-link">示例</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">生态系统</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>帮助</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">论坛</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">聊天室</a></li>
    </ul></li>
    <li><h4>工具</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Devtools</a></li>
        <li><a href="https://vuejs-templates.github.io/webpack" class="nav-link" target="_blank">webpack 模板</a></li>
        <li><a href="https://vue-loader.vuejs.org" class="nav-link" target="_blank">Vue loader</a></li>
      </ul>
    </li>
    <li><h4>核心库</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/" class="nav-link" target="_blank">Vue 服务器端渲染</a></li>
    </ul></li>
    <li><h4>信息</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">周刊</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">升级路线</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">推特</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">博客</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">工作</a></li>
    </ul></li>
    <li><h4>资源列表</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">官方仓库</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue 优选</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Vue 资源</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">团队</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">支持 Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">单次捐助</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">循环捐助</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">T恤商店</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">多语言</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>

<li class="nav-dropdown-container contribute">
  <a class="nav-link">参与贡献</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
        <li><a href="/about/index.html" class="nav-link">公告说明</a></li>
        <li><a href="https://github.com/docschina/vuejs.org/blob/cn/UPDATE.md" class="nav-link">更新记录</a></li>
      </ul></li>
  </ul>
</li>
<li class="nav-dropdown-container docschina">
  <a class="nav-link" style="color: #e96901">印记中文</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
        <li><a href="https://docschina.org/" target="_blank">印记中文首页</a></li>
        <li><a href="https://docschina.org/team" target="_blank">加入我们翻译文档</a></li>
        <li><a href="https://webpack.docschina.org/" target="_blank">webpack 中文文档</a></li>
        <li><a href="https://parceljs.docschina.org/" target="_blank">Parcel.js 中文文档</a></li>
        <li><a href="https://doc.react-china.org/" target="_blank">React.js 中文文档</a></li>
        <li><a href="http://nodejs.cn/" target="_blank">Node.js 中文文档</a></li>
      </ul></li>
    <li>
  </ul>
</li>

<li>

    </ul>
    <div class="list">
      <div id="sidebar-sponsors-special">
  <div class="main-sponsor">
    <span>特别赞助</span>
    <div>
    <a href="https://stdlib.com" target="_blank" class="logo">
      <img src="/images/stdlib.png">
    </a>
    <a href="https://www.bitsrc.io/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue" target="_blank" class="logo">
      <img src="/images/bit-wide.png">
    </a>
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum">
  <div class="main-sponsor">
    <span>Patreon 赞助</span>
    <div>
    <a href="http://tooltwist.com/" target="_blank" class="logo">
      <img src="/images/tooltwist.png">
    </a>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" class="logo">
      <img src="/images/vueschool.png">
    </a>
    <a href="https://vehikl.com/" target="_blank" class="logo">
      <img src="/images/vehikl.png">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    成为赞助者
  </a>
</div>

      <h2>
        
        Cookbook<sup class="beta">beta</sup>
        
      </h2>
      <ul class="menu-root">
  
    
    
    <li>
      <a href="/v2/cookbook/index.html" class="sidebar-link">Introduction</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/adding-instance-properties.html" class="sidebar-link">Adding Instance Properties</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/form-validation.html" class="sidebar-link">Form Validation</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/editable-svg-icons.html" class="sidebar-link">Editable SVG Icon Systems</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/serverless-blog.html" class="sidebar-link">Create a CMS-Powered Blog</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/unit-testing-vue-components.html" class="sidebar-link">单元测试 Vue 组件</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/creating-custom-scroll-directives.html" class="sidebar-link current">Creating Custom Scroll Directives</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/debugging-in-vscode.html" class="sidebar-link">Debugging in VS Code and Chrome</a>
    </li>
  
    
    
    <li>
      <a href="/v2/cookbook/using-axios-to-consume-apis.html" class="sidebar-link">Using Axios to Consume APIs</a>
    </li>
  
</ul>

    </div>
  </div>
</div>


<div class="content cookbook with-sidebar ">
  
    
      <!--<div id="ad">
  <script>
    (function () {
      var s = document.createElement('script')
      s.setAttribute('async', '')
      s.src = '//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs'
      s.id = '_carbonads_js'
      document.getElementById('ad').appendChild(s)
    })()
  </script>
</div>
-->
    
  
  
    <h1>Creating Custom Scroll Directives</h1>
  
  
    <h2 id="Base-Example"><a href="#Base-Example" class="headerlink" title="Base Example"></a>Base Example</h2><p>There are many times that we might want to add a bit of behavior, especially animation, to a scroll event on a site. There are many ways to do so, but the path with the least amount of code and dependencies is perhaps to use a <a href="https://vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener">custom directive</a> to create a hook for anything that fires off a particular scroll event.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'scroll'</span>, &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (binding.value(evt, el)) &#123;</span><br><span class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main app</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleScroll: <span class="function"><span class="keyword">function</span> (<span class="params">evt, el</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt; <span class="number">50</span>) &#123;</span><br><span class="line">        el.setAttribute(</span><br><span class="line">          <span class="string">'style'</span>,</span><br><span class="line">          <span class="string">'opacity: 1; transform: translate3d(0, -10px, 0)'</span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">window</span>.scrollY &gt; <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"centered"</span>&gt;</span>Scroll me<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">v-scroll</span>=<span class="string">"handleScroll"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A atque amet harum aut ab veritatis earum porro praesentium ut corporis. Quasi provident dolorem officia iure fugiat, eius mollitia sequi quisquam.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p class="tip">Remember! The directive must be registered before the Vue instance.</p>

<p>We’d also need a style property that will transition the intermediary values here, in this case:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  transition: 1.5s all cubic-bezier(0.39, 0.575, 0.565, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p></p><p data-height="450" data-theme-id="5162" data-slug-hash="983220ed949ac670dff96bdcaf9d3338" data-default-tab="result" data-user="sdras" data-embed-version="2" data-pen-title="Custom Scroll Directive- CSS Transition" class="codepen">See the Pen <a href="https://codepen.io/sdras/pen/983220ed949ac670dff96bdcaf9d3338/" target="_blank" rel="noopener">Custom Scroll Directive- CSS Transition</a> by Sarah Drasner (<a href="https://codepen.io/sdras" target="_blank" rel="noopener">@sdras</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>Or, with GreenSock(GSAP) or any other JavaScript animation library, the code becomes even more simple:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'scroll'</span>, &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (binding.value(evt, el)) &#123;</span><br><span class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main app</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleScroll: <span class="function"><span class="keyword">function</span> (<span class="params">evt, el</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt; <span class="number">50</span>) &#123;</span><br><span class="line">        TweenMax.to(el, <span class="number">1.5</span>, &#123;</span><br><span class="line">          y: <span class="number">-10</span>,</span><br><span class="line">          opacity: <span class="number">1</span>,</span><br><span class="line">          ease: Sine.easeOut</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">window</span>.scrollY &gt; <span class="number">100</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Though we would remove the previous CSS transition from this implementation because it’s now handled with JavaScript.</p>
<h2 id="The-Benefit-of-Using-Custom-Directives"><a href="#The-Benefit-of-Using-Custom-Directives" class="headerlink" title="The Benefit of Using Custom Directives"></a>The Benefit of Using Custom Directives</h2><p>Vue is rich with options for directives, most of which cover very common use-cases, which can create a very productive developer experience. But even if you have an edge case not covered by the framework, it’s got you covered in this case as well, because you can quite easily create a custom directive to fit your needs.</p>
<p>Attaching and removing scroll events to elements is a really good use case for this technique because just like other directives we use, they are necessarily tied to the element and otherwise, we’d have to find the reference for it in the DOM. This pattern avoids the need for traversal, and keeps the event logic paired with the node that it’s in reference to.</p>
<h2 id="Real-World-Example-Using-a-Custom-Scroll-Directive-for-Cascading-Animations"><a href="#Real-World-Example-Using-a-Custom-Scroll-Directive-for-Cascading-Animations" class="headerlink" title="Real-World Example: Using a Custom Scroll Directive for Cascading Animations"></a>Real-World Example: Using a Custom Scroll Directive for Cascading Animations</h2><p>In the course of creating a cohesive site, you may find that you’re reusing the same type of animation logic in several areas. It seems simple, we would then create a very specific custom directive, right? Well, typically if you’re reusing it, you will need to change it <em>just</em> slightly for each use.</p>
<p>To help keep our code concise and legible, we would want to pass in some predefined arguments such as the beginning point and ending of the animation as we scroll down the page.</p>
<p><strong>This example is better viewed in the <a href="https://s.codepen.io/sdras/debug/078c19f5b3ed7f7d28584da450296cd0" target="_blank" rel="noopener">full screen version</a>.</strong></p>
<p></p><p data-height="500" data-theme-id="5162" data-slug-hash="c8c55e3e0bba997350551dd747119100" data-default-tab="result" data-user="sdras" data-embed-version="2" data-pen-title="Scrolling Example- Using Custom Directives in Vue" class="codepen">See the Pen <a href="https://codepen.io/sdras/pen/c8c55e3e0bba997350551dd747119100/" target="_blank" rel="noopener">Scrolling Example- Using Custom Directives in Vue</a> by Sarah Drasner (<a href="https://codepen.io/sdras" target="_blank" rel="noopener">@sdras</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>In the demo above, each of the sections has two different types of animation triggered from the scroll: a morphing animation, and a drawing animation that animates the individual paths in the SVG. We reuse those two animations, so we can create a custom directive for each. The arguments we’ll pass in will help keep everything simple and reusable.</p>
<p>To show how we do this, we’ll take a look at the morphing shape example, where we’ll need to state the start and finish, as well as pass in a path value that we’ll create a morph to. These arguments are each defined as <code>binding.value.foo</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'clipscroll'</span>, &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> hasRun = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">if</span> (!hasRun &amp;&amp; <span class="built_in">window</span>.scrollY &gt; binding.value.start) &#123;</span><br><span class="line">        hasRun = <span class="literal">true</span></span><br><span class="line">        TweenMax.to(el, <span class="number">2</span>, &#123;</span><br><span class="line">          morphSVG: binding.value.toPath,</span><br><span class="line">          ease: Sine.easeIn</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">window</span>.scrollY &gt; binding.value.end) &#123;</span><br><span class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, f)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>We can then use this animation in our template, in this case we’re attaching the directive to the <code>clipPath</code> element, and pass all of our arguments to the directives in an object.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">clipPath</span> <span class="attr">id</span>=<span class="string">"clip-path"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-clipscroll</span>=<span class="string">"&#123; start: '50', end: '100', toPath: 'M0.39 0.34H15.99V22.44H0.39z' &#125;"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"poly-shapemorph"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">d</span>=<span class="string">"M12.46 20.76L7.34 22.04 3.67 18.25 5.12 13.18 10.24 11.9 13.91 15.69 12.46 20.76z"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">clipPath</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Alternative-Patterns"><a href="#Alternative-Patterns" class="headerlink" title="Alternative Patterns"></a>Alternative Patterns</h2><p>Custom directives are extremely useful, but you may find some situations where you need something very specific that already exists in scrolling libraries that you don’t wish to rebuild from scratch yourself.</p>
<p><a href="http://scrollmagic.io/" target="_blank" rel="noopener">Scrollmagic</a> has a very rich ecosystem of offerings to work with, as well as good documentation and demos to explore. This includes, but is not limited to things like <a href="http://scrollmagic.io/examples/advanced/parallax_scrolling.html" target="_blank" rel="noopener">parallax</a>, <a href="http://scrollmagic.io/examples/expert/cascading_pins.html" target="_blank" rel="noopener">cascading pinning</a>, <a href="http://scrollmagic.io/examples/basic/section_wipes_natural.html" target="_blank" rel="noopener">section wipes</a>, and <a href="http://scrollmagic.io/examples/basic/responsive_duration.html" target="_blank" rel="noopener">responsive duration</a>.</p>
<hr>
<blockquote>
<p>原文：<a href="https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html" target="_blank" rel="noopener">https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html</a></p>
</blockquote>
<hr>

  
  
  <div class="footer">
      <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div class="bsa-cpc"></div>
<script>
  (function(){
    if(typeof _bsa !== 'undefined' && _bsa) {
    _bsa.init('default', 'CKYD62QM', 'placement:vuejsorg', {
      target: '.bsa-cpc',
      align: 'horizontal',
      disable_css: 'true'
    });
      }
  })();
</script>

    发现错误？想参与编辑？
    <a href="https://github.com/docschina/vuejs.org/blob/cn/src/v2/cookbook/creating-custom-scroll-directives.md" target="_blank">
      在 GitHub 上编辑此页！
    </a>
  </div>
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/search.css">
    <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" type="text/javascript"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      docsearch({
      apiKey: '528a52bb98fa94e699a32180b5e72cac',
      indexName: 'vuefe',
      inputSelector: selector,
      debug: false
      })
    })
    </script>

    <!-- fastclick -->
    <script src="//lib.baomitu.com/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      FastClick.attach(document.body)
    }, false)
    </script>
  </body>
</html>
